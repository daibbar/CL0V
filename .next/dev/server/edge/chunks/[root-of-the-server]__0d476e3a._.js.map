{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/CL0V/auth.config.ts"],"sourcesContent":["import type { NextAuthConfig } from 'next-auth';\n\nexport const authConfig = {\n  pages: {\n    signIn: '/login',\n  },\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.role = (user as any).role;\n        token.id = (user as any).id;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      if (token && session.user) {\n        (session.user as any).role = token.role;\n        (session.user as any).id = token.id;\n      }\n      return session;\n    },\n    authorized({ auth, request: { nextUrl } }) {\n      const isLoggedIn = !!auth?.user;\n      const role = (auth?.user as any)?.role;\n\n      const isOnAdminDashboard = nextUrl.pathname.startsWith('/dashboard') || \n                            nextUrl.pathname.startsWith('/students') ||\n                            nextUrl.pathname.startsWith('/clubs') ||\n                            nextUrl.pathname.startsWith('/events') ||\n                            nextUrl.pathname.startsWith('/activities') ||\n                            nextUrl.pathname.startsWith('/memberships') ||\n                            nextUrl.pathname.startsWith('/resources') ||\n                            nextUrl.pathname.startsWith('/guests') ||\n                            nextUrl.pathname.startsWith('/reservations');\n      \n      const isOnStudentDashboard = nextUrl.pathname.startsWith('/student');\n\n      const isOnLogin = nextUrl.pathname.startsWith('/login');\n      const isOnRegister = nextUrl.pathname.startsWith('/register');\n      const isOnHome = nextUrl.pathname.startsWith('/home') || nextUrl.pathname === '/';\n\n      // Redirect logic for logged-in users trying to access public pages\n      if (isLoggedIn && (isOnLogin || isOnRegister || isOnHome)) {\n         if (role === 'student') {\n            return Response.redirect(new URL('/student/dashboard', nextUrl));\n         } else {\n            return Response.redirect(new URL('/dashboard', nextUrl));\n         }\n      }\n\n      // Protect Admin Routes\n      if (isOnAdminDashboard) {\n        if (!isLoggedIn) return false;\n        if (role !== 'admin') {\n           return Response.redirect(new URL('/student/dashboard', nextUrl));\n        }\n        return true;\n      }\n\n      // Protect Student Routes\n      if (isOnStudentDashboard) {\n        if (!isLoggedIn) return false;\n        if (role !== 'student') {\n           // Optionally allow admins to view student dashboard or redirect them back\n           return Response.redirect(new URL('/dashboard', nextUrl));\n        }\n        return true;\n      }\n      \n      return true;\n    },\n  },\n  providers: [], \n} satisfies NextAuthConfig;\n"],"names":[],"mappings":";;;;AAEO,MAAM,aAAa;IACxB,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,IAAI,GAAG,AAAC,KAAa,IAAI;gBAC/B,MAAM,EAAE,GAAG,AAAC,KAAa,EAAE;YAC7B;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACxB,QAAQ,IAAI,CAAS,IAAI,GAAG,MAAM,IAAI;gBACtC,QAAQ,IAAI,CAAS,EAAE,GAAG,MAAM,EAAE;YACrC;YACA,OAAO;QACT;QACA,YAAW,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE;YACvC,MAAM,aAAa,CAAC,CAAC,MAAM;YAC3B,MAAM,OAAQ,MAAM,MAAc;YAElC,MAAM,qBAAqB,QAAQ,QAAQ,CAAC,UAAU,CAAC,iBACjC,QAAQ,QAAQ,CAAC,UAAU,CAAC,gBAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,aAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,cAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,kBAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,mBAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,iBAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,cAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC;YAElD,MAAM,uBAAuB,QAAQ,QAAQ,CAAC,UAAU,CAAC;YAEzD,MAAM,YAAY,QAAQ,QAAQ,CAAC,UAAU,CAAC;YAC9C,MAAM,eAAe,QAAQ,QAAQ,CAAC,UAAU,CAAC;YACjD,MAAM,WAAW,QAAQ,QAAQ,CAAC,UAAU,CAAC,YAAY,QAAQ,QAAQ,KAAK;YAE9E,mEAAmE;YACnE,IAAI,cAAc,CAAC,aAAa,gBAAgB,QAAQ,GAAG;gBACxD,IAAI,SAAS,WAAW;oBACrB,OAAO,SAAS,QAAQ,CAAC,IAAI,IAAI,sBAAsB;gBAC1D,OAAO;oBACJ,OAAO,SAAS,QAAQ,CAAC,IAAI,IAAI,cAAc;gBAClD;YACH;YAEA,uBAAuB;YACvB,IAAI,oBAAoB;gBACtB,IAAI,CAAC,YAAY,OAAO;gBACxB,IAAI,SAAS,SAAS;oBACnB,OAAO,SAAS,QAAQ,CAAC,IAAI,IAAI,sBAAsB;gBAC1D;gBACA,OAAO;YACT;YAEA,yBAAyB;YACzB,IAAI,sBAAsB;gBACxB,IAAI,CAAC,YAAY,OAAO;gBACxB,IAAI,SAAS,WAAW;oBACrB,0EAA0E;oBAC1E,OAAO,SAAS,QAAQ,CAAC,IAAI,IAAI,cAAc;gBAClD;gBACA,OAAO;YACT;YAEA,OAAO;QACT;IACF;IACA,WAAW,EAAE;AACf"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/CL0V/middleware.ts"],"sourcesContent":["import NextAuth from 'next-auth';\nimport { authConfig } from './auth.config';\n\nexport default NextAuth(authConfig).auth;\n\nexport const config = {\n  // https://nextjs.org/docs/app/building-your-application/routing/middleware#matcher\n  matcher: ['/((?!api|_next/static|_next/image|.*\\.png$).*)'],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;uCAEe,IAAA,oXAAQ,EAAC,4IAAU,EAAE,IAAI;AAEjC,MAAM,SAAS;IACpB,mFAAmF;IACnF,SAAS;QAAC;KAAiD;AAC7D"}}]
}