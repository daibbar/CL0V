{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/lib/db.ts"],"sourcesContent":["import Database from 'better-sqlite3';\nimport path from 'path';\n\nconst dbPath = path.join(process.cwd(), 'data', 'cl0v.db');\n\nconst db = new Database(dbPath, { verbose: console.log});\n\ndb.pragma('foreign_keys = ON');\n\nexport default db;"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAEhD,MAAM,KAAK,IAAI,sIAAQ,CAAC,QAAQ;IAAE,SAAS,QAAQ,GAAG;AAAA;AAEtD,GAAG,MAAM,CAAC;uCAEK"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/actions/event-actions.ts"],"sourcesContent":["'use server'\n\nimport db from '@/lib/db';\nimport { revalidatePath } from 'next/cache';\nimport { Event } from '@/types/db'; \n\n// --- CREATE EVENT ---\nexport async function createEvent(formData: FormData) {\n  const eventName = formData.get('eventName') as string;\n  const startDate = formData.get('startDate') as string;\n  const endDate = formData.get('endDate') as string;\n\n  try {\n    const stmt = db.prepare(`\n      INSERT INTO events (eventName, startDate, endDate)\n      VALUES (@eventName, @startDate, @endDate)\n    `);\n\n    stmt.run({ eventName, startDate, endDate });\n    \n    revalidatePath('/events');\n    return { success: true, message: 'Event created successfully' };\n  } catch (error: any) {\n    return { success: false, message: error.message };\n  }\n}\n\n// --- READ EVENTS (Optional utility) ---\nexport async function getEvents() {\n  try {\n    const events = db.prepare('SELECT * FROM events ORDER BY startDate DESC').all() as Event[];\n    return events;\n  } catch (error: any) {\n    console.error(\"Failed to fetch events:\", error);\n    return [];\n  }\n}\n\n// --- UPDATE EVENT ---\nexport async function updateEvent(eventId: number, formData: FormData) {\n  const eventName = formData.get('eventName') as string;\n  const startDate = formData.get('startDate') as string;\n  const endDate = formData.get('endDate') as string;\n\n  try {\n    const stmt = db.prepare(`\n      UPDATE events \n      SET eventName = @eventName, \n          startDate = @startDate, \n          endDate = @endDate\n      WHERE eventId = @eventId\n    `);\n\n    stmt.run({ eventName, startDate, endDate, eventId });\n\n    revalidatePath('/events');\n    return { success: true, message: 'Event updated successfully' };\n  } catch (error: any) {\n    return { success: false, message: error.message };\n  }\n}\n\n// --- DELETE EVENT ---\nexport async function deleteEvent(eventId: number) {\n  try {\n    const stmt = db.prepare('DELETE FROM events WHERE eventId = ?');\n    stmt.run(eventId);\n\n    revalidatePath('/events');\n    return { success: true, message: 'Event deleted successfully' };\n  } catch (error: any) {\n    return { success: false, message: error.message };\n  }\n}\n\n// --- ADD STUDENT TO EVENT (Attendance) ---\nexport async function addStudentToEvent(formData: FormData) {\n  const eventId = Number(formData.get('eventId'));\n  const studentId = Number(formData.get('studentId'));\n\n  if (!eventId || !studentId) {\n    return { success: false, message: 'Invalid Event or Student ID' };\n  }\n\n  try {\n    // Uses the camelCase table name 'eventParticipants' matching your schema\n    const stmt = db.prepare(`\n      INSERT INTO eventParticipants (eventId, studentId)\n      VALUES (@eventId, @studentId)\n    `);\n\n    stmt.run({ eventId, studentId });\n\n    // Revalidate events to update the UI counts/lists immediately\n    revalidatePath('/events');\n    return { success: true, message: 'Student successfully registered for event' };\n\n  } catch (error: any) {\n    // Handle Unique Constraint (Student already added)\n    if (error.code === 'SQLITE_CONSTRAINT_PRIMARYKEY' || error.code === 'SQLITE_CONSTRAINT_UNIQUE') {\n      return { success: false, message: 'Student is already registered for this event' };\n    }\n    return { success: false, message: error.message };\n  }\n}\n\n// --- REMOVE STUDENT FROM EVENT ---\nexport async function removeStudentFromEvent(formData: FormData) {\n    const eventId = Number(formData.get('eventId'));\n    const studentId = Number(formData.get('studentId'));\n\n    if (!eventId || !studentId) {\n        return { success: false, message: 'Invalid Event or Student ID' };\n    }\n\n    try {\n        const stmt = db.prepare('DELETE FROM eventParticipants WHERE eventId = ? AND studentId = ?');\n        stmt.run(eventId, studentId);\n        \n        revalidatePath('/events');\n        return { success: true, message: 'Student removed from event' };\n    } catch (error: any) {\n        return { success: false, message: error.message };\n    }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/.next-internal/server/app/events/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createEvent as '403e5a982f8755e6b16f59f4809c421466d15886a0'} from 'ACTIONS_MODULE0'\nexport {updateEvent as '606b7e8b78018ace53376c80e58e5d16cf5092564f'} from 'ACTIONS_MODULE0'\nexport {deleteEvent as '40b9392a185f6ffae43160a7f170e8f4ebbaa456c0'} from 'ACTIONS_MODULE0'\nexport {addStudentToEvent as '405eda02ecdfa76802a6324bc23adc89fb34d879a0'} from 'ACTIONS_MODULE0'\nexport {removeStudentFromEvent as '4065cfb9e2b3af6bead2163348801ce68958481d8f'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}