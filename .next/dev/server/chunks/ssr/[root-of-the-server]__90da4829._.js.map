{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/lib/db.ts"],"sourcesContent":["import Database from 'better-sqlite3';\nimport path from 'path';\n\nconst dbPath = path.join(process.cwd(), 'data', 'cl0v.db');\n\nconst db = new Database(dbPath, { verbose: console.log});\n\ndb.pragma('foreign_keys = ON');\n\nexport default db;"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAEhD,MAAM,KAAK,IAAI,sIAAQ,CAAC,QAAQ;IAAE,SAAS,QAAQ,GAAG;AAAA;AAEtD,GAAG,MAAM,CAAC;uCAEK"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/actions/club-actions.ts"],"sourcesContent":["'use server'\n\nimport db from '@/lib/db';\nimport { Club } from '@/types/db';\nimport { revalidatePath } from 'next/cache';\n\n// --- CREATE ---\nexport async function createClub(formData: FormData) {\n  const clubName = formData.get('clubName') as string;\n  const category = formData.get('category') as string;\n  const description = formData.get('description') as string;\n  const createdAt = formData.get('createdAt') as string;\n\n  try {\n    const stmt = db.prepare(`\n      INSERT INTO clubs (clubName, category, description, createdAt)\n      VALUES (@clubName, @category, @description, @createdAt)\n    `);\n\n    stmt.run({ clubName, category, description, createdAt });\n    \n    // Refresh the page data\n    revalidatePath('/clubs');\n    return { success: true, message: 'Club created successfully' };\n  } catch (error: any) {\n    return { success: false, message: error.message };\n  }\n}\n\n// --- READ (Optional, usually done directly in Server Components) ---\nexport async function getClubs() {\n  const clubs = db.prepare('SELECT * FROM clubs ORDER BY createdAt DESC').all() as Club[];\n  return clubs;\n}\n\n// --- UPDATE ---\nexport async function updateClub(clubId: number, formData: FormData) {\n  const clubName = formData.get('clubName') as string;\n  const category = formData.get('category') as string;\n  const description = formData.get('description') as string;\n  const createdAt = formData.get('createdAt') as string;\n\n  try {\n    const stmt = db.prepare(`\n      UPDATE clubs \n      SET clubName = @clubName, \n          category = @category, \n          description = @description, \n          createdAt = @createdAt\n      WHERE clubId = @clubId\n    `);\n\n    stmt.run({ clubName, category, description, createdAt, clubId });\n\n    revalidatePath('/clubs');\n    return { success: true, message: 'Club updated successfully' };\n  } catch (error: any) {\n    return { success: false, message: error.message };\n  }\n}\n\n// --- DELETE ---\nexport async function deleteClub(clubId: number) {\n  try {\n    const stmt = db.prepare('DELETE FROM clubs WHERE clubId = ?');\n    stmt.run(clubId);\n\n    revalidatePath('/clubs');\n    return { success: true, message: 'Club deleted successfully' };\n  } catch (error: any) {\n    return { success: false, message: error.message };\n  }\n}\n\n// --- GET CLUBS BY EVENT ---\nexport async function getClubsByEvent(eventId: number) {\n  try {\n    const clubs = db.prepare(`\n      SELECT c.*\n      FROM clubs c\n      JOIN eventOrganizers eo ON c.clubId = eo.clubId\n      WHERE eo.eventId = ?\n    `).all(eventId);\n\n    return clubs || [];\n  } catch (error: any) {\n    console.error(\"Failed to fetch clubs for event:\", error);\n    return [];\n  }\n}\n\n// --- CLUB MEMBERSHIPS ---\nexport async function getClubMembers(clubId: number) {\n  try {\n    const members = db.prepare(`\n      SELECT s.*, cm.joinedAt\n      FROM students s\n      JOIN clubMemberships cm ON s.studentId = cm.studentId\n      WHERE cm.clubId = ?\n      ORDER BY cm.joinedAt DESC\n    `).all(clubId);\n    \n    return members;\n  } catch (error: any) {\n    console.error(\"Failed to fetch club members:\", error);\n    return [];\n  }\n}\n\nexport async function getClubEvents(clubId: number) {\n  try {\n    // Events where the club is an organizer\n    const events = db.prepare(`\n      SELECT e.*\n      FROM events e\n      JOIN eventOrganizers eo ON e.eventId = eo.eventId\n      WHERE eo.clubId = ?\n      ORDER BY e.startDate DESC\n    `).all(clubId);\n    return events;\n  } catch (error) {\n    console.error(\"Failed to fetch club events:\", error);\n    return [];\n  }\n}\n\nexport async function getClubActivities(clubId: number) {\n  try {\n    // Activities owned by the club\n    const activities = db.prepare(`\n      SELECT * FROM activities WHERE clubId = ? ORDER BY startDate DESC\n    `).all(clubId);\n    return activities;\n  } catch (error) {\n     console.error(\"Failed to fetch club activities:\", error);\n     return [];\n  }\n}\n\nexport async function getClubMemberships() {\n  try {\n    const rows = db.prepare(`\n      SELECT cm.membershipId, cm.joinedAt,\n             c.clubName as clubName, c.category as clubCategory,\n             s.studentId, s.firstName || ' ' || s.lastName as studentName, s.cne as studentCne, s.email as studentEmail\n      FROM clubMemberships cm\n      JOIN clubs c ON cm.clubId = c.clubId\n      JOIN students s ON cm.studentId = s.studentId\n      ORDER BY cm.joinedAt DESC\n    `).all();\n\n    return rows || [];\n  } catch (error: any) {\n    console.error('Failed to fetch club memberships', error);\n    return [];\n  }\n}\n\nexport async function createClubMembership(formData: FormData) {\n  const studentId = parseInt(formData.get('studentId') as string);\n  const clubId = parseInt(formData.get('clubId') as string);\n  const joinedAt = (formData.get('joinedAt') as string) || new Date().toISOString();\n\n  try {\n    const stmt = db.prepare(`\n      INSERT INTO clubMemberships (joinedAt, clubId, studentId)\n      VALUES (@joinedAt, @clubId, @studentId)\n    `);\n\n    stmt.run({ joinedAt, clubId, studentId });\n    revalidatePath('/memberships');\n    return { success: true };\n  } catch (error: any) {\n    console.error('Failed to create club membership', error);\n    return { success: false, message: error.message };\n  }\n}\n\nexport async function deleteClubMembership(membershipId: number) {\n  try {\n    const stmt = db.prepare('DELETE FROM clubMemberships WHERE membershipId = ?');\n    stmt.run(membershipId);\n    revalidatePath('/memberships');\n    return { success: true };\n  } catch (error: any) {\n    console.error('Failed to delete club membership', error);\n    return { success: false, message: error.message };\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/.next-internal/server/app/clubs/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createClub as '40fb1239fe5dab8c81aa1a6c6a4e3d3dff68362a12'} from 'ACTIONS_MODULE0'\nexport {updateClub as '608c092e7574f097374d45ba2f0b8c1a86de07b8f0'} from 'ACTIONS_MODULE0'\nexport {deleteClub as '403f314d2770b6d30df991c169ac621c3e542a6a3e'} from 'ACTIONS_MODULE0'\nexport {getClubs as '00545b232253d73c1b611478bd06ced735bf06d28f'} from 'ACTIONS_MODULE0'\nexport {getClubMembers as '4000313a5acbb7e94baad51d8157f0172a109b57f5'} from 'ACTIONS_MODULE0'\nexport {getClubEvents as '401e2045fbee811dd001c67288e014f0808a177f35'} from 'ACTIONS_MODULE0'\nexport {getClubActivities as '40ebf616928dfb92ae12b9e40f78a4de8020661f1a'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}