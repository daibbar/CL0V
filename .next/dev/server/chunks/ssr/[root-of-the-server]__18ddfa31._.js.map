{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/lib/db.ts"],"sourcesContent":["import Database from 'better-sqlite3';\nimport path from 'path';\n\nconst dbPath = path.join(process.cwd(), 'data', 'cl0v.db');\n\nconst db = new Database(dbPath, { verbose: console.log});\n\ndb.pragma('foreign_keys = ON');\n\nexport default db;"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAEhD,MAAM,KAAK,IAAI,sIAAQ,CAAC,QAAQ;IAAE,SAAS,QAAQ,GAAG;AAAA;AAEtD,GAAG,MAAM,CAAC;uCAEK"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/actions/dashboard-actions.ts"],"sourcesContent":["'use server'\n\nimport db from '@/lib/db';\nimport { Activity, Club } from '@/types/db';\n\nexport async function getDashboardStats() {\n  try {\n    const clubCount = (db.prepare('SELECT COUNT(*) as count FROM clubs').get() as { count: number }).count;\n    \n    // Upcoming events (start date >= today)\n    const upcomingEventsCount = (db.prepare(\"SELECT COUNT(*) as count FROM events WHERE startDate >= date('now')\").get() as { count: number }).count;\n    \n    // Active students: students who are members of at least one club\n    const activeStudentsCount = (db.prepare('SELECT COUNT(DISTINCT studentId) as count FROM clubMemberships').get() as { count: number }).count;\n    \n    const activityCount = (db.prepare('SELECT COUNT(*) as count FROM activities').get() as { count: number }).count;\n\n    return {\n      clubCount,\n      upcomingEventsCount,\n      activeStudentsCount,\n      activityCount\n    };\n  } catch (error) {\n    console.error(\"Failed to fetch dashboard stats:\", error);\n    return {\n      clubCount: 0,\n      upcomingEventsCount: 0,\n      activeStudentsCount: 0,\n      activityCount: 0\n    };\n  }\n}\n\nexport async function getRecentActivities() {\n  try {\n    // Fetch last 5 activities created/updated or starting soon? \n    // Usually \"Recent Activities\" on a dashboard means \"what's happening recently or soon\".\n    // Let's go with the most recently created (highest ID usually implies creation if autoincrement) \n    // OR sorted by startDate DESC. Let's do startDate DESC to show latest things happening.\n    const activities = db.prepare(`\n      SELECT activityName as name, type, startDate as time\n      FROM activities \n      ORDER BY startDate DESC \n      LIMIT 5\n    `).all() as { name: string, type: string, time: string }[];\n    \n    return activities.map(a => ({\n        ...a,\n        // Format the date for display\n        time: new Date(a.time).toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' })\n    }));\n  } catch (error) {\n    console.error(\"Failed to fetch recent activities:\", error);\n    return [];\n  }\n}\n\nexport async function getClubCategoryStats() {\n  try {\n    const totalClubs = (db.prepare('SELECT COUNT(*) as count FROM clubs').get() as { count: number }).count;\n    \n    if (totalClubs === 0) return [];\n\n    const stats = db.prepare(`\n      SELECT category, COUNT(*) as count\n      FROM clubs\n      GROUP BY category\n    `).all() as { category: string, count: number }[];\n\n    return stats.map(stat => ({\n      category: stat.category,\n      count: stat.count,\n      percentage: Math.round((stat.count / totalClubs) * 100)\n    }));\n  } catch (error) {\n    console.error(\"Failed to fetch club category stats:\", error);\n    return [];\n  }\n}\n\nexport async function getEngagementMetrics() {\n    try {\n        const totalStudents = (db.prepare('SELECT COUNT(*) as count FROM students').get() as { count: number }).count;\n        const activeStudents = (db.prepare('SELECT COUNT(DISTINCT studentId) as count FROM clubMemberships').get() as { count: number }).count;\n        \n        const engagementRate = totalStudents > 0 ? Math.round((activeStudents / totalStudents) * 100) : 0;\n\n        // Calculate event attendance rate (unique students participating in events / total students)\n        const eventParticipants = (db.prepare('SELECT COUNT(DISTINCT studentId) as count FROM eventParticipants').get() as { count: number }).count;\n        const eventAttendanceRate = totalStudents > 0 ? Math.round((eventParticipants / totalStudents) * 100) : 0;\n\n        return {\n            engagementRate,\n            eventAttendanceRate\n        };\n    } catch (error) {\n        console.error(\"Failed to fetch engagement metrics:\", error);\n        return { engagementRate: 0, eventAttendanceRate: 0 };\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;;;;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,YAAY,AAAC,4HAAE,CAAC,OAAO,CAAC,uCAAuC,GAAG,GAAyB,KAAK;QAEtG,wCAAwC;QACxC,MAAM,sBAAsB,AAAC,4HAAE,CAAC,OAAO,CAAC,uEAAuE,GAAG,GAAyB,KAAK;QAEhJ,iEAAiE;QACjE,MAAM,sBAAsB,AAAC,4HAAE,CAAC,OAAO,CAAC,kEAAkE,GAAG,GAAyB,KAAK;QAE3I,MAAM,gBAAgB,AAAC,4HAAE,CAAC,OAAO,CAAC,4CAA4C,GAAG,GAAyB,KAAK;QAE/G,OAAO;YACL;YACA;YACA;YACA;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO;YACL,WAAW;YACX,qBAAqB;YACrB,qBAAqB;YACrB,eAAe;QACjB;IACF;AACF;AAEO,eAAe;IACpB,IAAI;QACF,6DAA6D;QAC7D,wFAAwF;QACxF,kGAAkG;QAClG,wFAAwF;QACxF,MAAM,aAAa,4HAAE,CAAC,OAAO,CAAC,CAAC;;;;;IAK/B,CAAC,EAAE,GAAG;QAEN,OAAO,WAAW,GAAG,CAAC,CAAA,IAAK,CAAC;gBACxB,GAAG,CAAC;gBACJ,8BAA8B;gBAC9B,MAAM,IAAI,KAAK,EAAE,IAAI,EAAE,kBAAkB,CAAC,WAAW;oBAAE,OAAO;oBAAS,KAAK;oBAAW,MAAM;gBAAU;YAC3G,CAAC;IACH,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO,EAAE;IACX;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,aAAa,AAAC,4HAAE,CAAC,OAAO,CAAC,uCAAuC,GAAG,GAAyB,KAAK;QAEvG,IAAI,eAAe,GAAG,OAAO,EAAE;QAE/B,MAAM,QAAQ,4HAAE,CAAC,OAAO,CAAC,CAAC;;;;IAI1B,CAAC,EAAE,GAAG;QAEN,OAAO,MAAM,GAAG,CAAC,CAAA,OAAQ,CAAC;gBACxB,UAAU,KAAK,QAAQ;gBACvB,OAAO,KAAK,KAAK;gBACjB,YAAY,KAAK,KAAK,CAAC,AAAC,KAAK,KAAK,GAAG,aAAc;YACrD,CAAC;IACH,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wCAAwC;QACtD,OAAO,EAAE;IACX;AACF;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,gBAAgB,AAAC,4HAAE,CAAC,OAAO,CAAC,0CAA0C,GAAG,GAAyB,KAAK;QAC7G,MAAM,iBAAiB,AAAC,4HAAE,CAAC,OAAO,CAAC,kEAAkE,GAAG,GAAyB,KAAK;QAEtI,MAAM,iBAAiB,gBAAgB,IAAI,KAAK,KAAK,CAAC,AAAC,iBAAiB,gBAAiB,OAAO;QAEhG,6FAA6F;QAC7F,MAAM,oBAAoB,AAAC,4HAAE,CAAC,OAAO,CAAC,oEAAoE,GAAG,GAAyB,KAAK;QAC3I,MAAM,sBAAsB,gBAAgB,IAAI,KAAK,KAAK,CAAC,AAAC,oBAAoB,gBAAiB,OAAO;QAExG,OAAO;YACH;YACA;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,uCAAuC;QACrD,OAAO;YAAE,gBAAgB;YAAG,qBAAqB;QAAE;IACvD;AACJ;;;IA/FsB;IA6BA;IAwBA;IAuBA;;AA5EA,uXAAA;AA6BA,uXAAA;AAwBA,uXAAA;AAuBA,uXAAA"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/.next-internal/server/app/%28dashboard%29/dashboard/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getDashboardStats as '001c8948724c15f0bf67e974033b8c26dfe76b9b38'} from 'ACTIONS_MODULE0'\nexport {getRecentActivities as '004a8ed2051fca82d01d53736941f7b33f14f0fd33'} from 'ACTIONS_MODULE0'\nexport {getEngagementMetrics as '0067eb855490148289330d8a23b7de05c198a7492a'} from 'ACTIONS_MODULE0'\nexport {getClubCategoryStats as '007219098fc91af7513de20fce15e7dc7c6e076dc9'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/node_modules/.pnpm/next%4016.0.10_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n"],"names":["registerServerReference"],"mappings":"AAAA,oDAAoD;;;+BAC3CA,2BAAAA;;;eAAAA,QAAAA,uBAAuB;;;wBAAQ","ignoreList":[0]}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///home/daibbar/projects/CL0V/node_modules/.pnpm/next%4016.0.10_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts"],"sourcesContent":["// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n"],"names":["ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"AAAA,+EAA+E;AAC/E,yEAAyE;AACzE,iEAAiE;;;;+BACjDA,4BAAAA;;;eAAAA;;;AAAT,SAASA,yBAAyBC,OAAc;IACrD,IAAK,IAAIC,IAAI,GAAGA,IAAID,QAAQE,MAAM,EAAED,IAAK;QACvC,MAAME,SAASH,OAAO,CAACC,EAAE;QACzB,IAAI,OAAOE,WAAW,YAAY;YAChC,MAAM,OAAA,cAEL,CAFK,IAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,OAAO,uEAAuE,CAAC,GADhJ,qBAAA;uBAAA;4BAAA;8BAAA;YAEN;QACF;IACF;AACF","ignoreList":[0]}}]
}