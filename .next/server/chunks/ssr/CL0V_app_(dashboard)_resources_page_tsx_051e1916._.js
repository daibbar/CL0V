module.exports=[84961,a=>{"use strict";var b=a.i(7537),c=a.i(2009),d=a.i(78989),e=a.i(32051),f=a.i(56427),g=a.i(53210),h=a.i(51799),i=a.i(50897),j=a.i(62532),k=a.i(32882),l=a.i(65539),m=a.i(28888),n=a.i(78183),o=a.i(36343);let p=(0,o.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),q=(0,o.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),r=(0,o.default)("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);var s=a.i(13913),t=a.i(11081),u=a.i(73381),v=a.i(22677),w=a.i(19913),x=(0,w.createServerReference)("00e654ceabdc2ef0b3abb64113b50455102b755fa8",w.callServer,void 0,w.findSourceMapURL,"getResources"),y=(0,w.createServerReference)("407f81cec20b4a4841cefb5568a48822a27ad3a5ef",w.callServer,void 0,w.findSourceMapURL,"createResource"),z=(0,w.createServerReference)("601411d3b4eab9a02b85129d9bcac63b0a3552b743",w.callServer,void 0,w.findSourceMapURL,"updateResource"),A=(0,w.createServerReference)("40f77f8aeebe4126b29849e4c8e7bfd327abd48476",w.callServer,void 0,w.findSourceMapURL,"deleteResource"),B=(0,w.createServerReference)("0072b14644364f2ab70443cec4b8a509feedfa6503",w.callServer,void 0,w.findSourceMapURL,"getReservations"),C=(0,w.createServerReference)("404eebf20e5aa1690ea82ec4e4c684ed18c777e83a",w.callServer,void 0,w.findSourceMapURL,"createReservation"),D=(0,w.createServerReference)("40d043237f4dbfa7f5cd74ae0594e29d76ac23a32e",w.callServer,void 0,w.findSourceMapURL,"deleteReservation"),E=a.i(61713);function F(){let[a,o]=(0,c.useState)([]),[w,F]=(0,c.useState)([]),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(!0),[S,T]=(0,c.useState)(new Date),{toast:U}=(0,v.useToast)();(0,c.useEffect)(()=>{let a=setInterval(()=>{T(new Date)},6e4);return()=>clearInterval(a)},[]);let V=async()=>{R(!0);try{let[a,b,c]=await Promise.all([x(),B(),(0,E.getActivities)()]);o(a),H(c),F(b)}catch(a){U({title:"Error loading data",variant:"destructive"})}finally{R(!1)}};(0,c.useEffect)(()=>{V()},[]);let W=async a=>{a.preventDefault();let b=new FormData(a.currentTarget);try{let a;(a=O?await z(O.resourceId,b):await y(b)).success?(U({title:a.message}),await V(),L(!1),P(null)):U({title:a.message,variant:"destructive"})}catch(a){U({title:a.message,variant:"destructive"})}},X=async a=>{if(a.preventDefault(),!I)return;let b=new FormData(a.currentTarget);b.get("resourceId")||b.append("resourceId",I.resourceId.toString());try{let a=await C(b);a.success?(U({title:a.message}),await V(),N(!1)):U({title:a.message,variant:"destructive"})}catch(a){U({title:a.message,variant:"destructive"})}},Y=async a=>{try{let b=await D(a);b.success?(U({title:"Reservation cancelled"}),await V()):U({title:b.message,variant:"destructive"})}catch(a){U({title:a.message,variant:"destructive"})}},Z=async b=>{try{let c=await A(b);c.success?(U({title:c.message}),o(a.filter(a=>a.resourceId!==b)),I?.resourceId===b&&J(null)):U({title:c.message,variant:"destructive"})}catch(a){U({title:a.message,variant:"destructive"})}},$=a=>w.filter(b=>b.resourceId===a),_=a=>w.filter(b=>b.resourceId===a&&new Date(b.endDate)<S),aa=a=>w.filter(b=>b.resourceId===a&&new Date(b.endDate)>=S),ab=(a,b)=>{let c=b.getTime()-a.getTime(),d=Math.floor(c/36e5),e=Math.floor(c%36e5/6e4);return d>0&&e>0?`${d}h ${e}m`:d>0?`${d}h`:`${e}m`},ac=a=>new Date(a).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("header",{className:"border-b border-border bg-card",children:(0,b.jsxs)("div",{className:"px-8 py-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Resources Management"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage facilities and track reservations"})]})}),(0,b.jsx)("main",{className:"px-8 py-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{children:"All Resources"}),(0,b.jsx)(e.CardDescription,{children:"Select to view details"})]}),(0,b.jsxs)(g.Dialog,{open:K,onOpenChange:a=>{L(a),a||P(null)},children:[(0,b.jsx)(g.DialogTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{size:"sm",children:(0,b.jsx)(k.Plus,{className:"h-4 w-4"})})}),(0,b.jsxs)(g.DialogContent,{children:[(0,b.jsxs)(g.DialogHeader,{children:[(0,b.jsx)(g.DialogTitle,{children:O?"Edit Resource":"Create New Resource"}),(0,b.jsx)(g.DialogDescription,{children:O?"Update resource information":"Add a new resource to the system"})]}),(0,b.jsxs)("form",{onSubmit:W,className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(i.Label,{htmlFor:"nom",children:"Resource Name"}),(0,b.jsx)(h.Input,{id:"nom",name:"nom",defaultValue:O?.resourceName,required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(i.Label,{htmlFor:"type_ressource",children:"Resource Type"}),(0,b.jsxs)(j.Select,{name:"type_ressource",defaultValue:O?.type,required:!0,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"Salle",children:"Salle"}),(0,b.jsx)(j.SelectItem,{value:"Amphitheatre",children:"Amphitheatre"}),(0,b.jsx)(j.SelectItem,{value:"Buvette",children:"Buvette"}),(0,b.jsx)(j.SelectItem,{value:"Bibliotheque",children:"Bibliotheque"}),(0,b.jsx)(j.SelectItem,{value:"Terrain",children:"Terrain"}),(0,b.jsx)(j.SelectItem,{value:"Labo",children:"Labo"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>L(!1),children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",children:O?"Update":"Create"})]})]})]})]})]}),(0,b.jsx)(e.CardContent,{className:"space-y-2 overflow-y-auto max-h-[600px]",children:Q?(0,b.jsx)("div",{className:"flex justify-center py-8",children:(0,b.jsx)(u.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===a.length?(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No resources found."}):a.map(a=>(0,b.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-lg border cursor-pointer transition-all ${I?.resourceId===a.resourceId?"bg-primary/10 border-primary":"group bg-card border-border hover:bg-accent hover:text-accent-foreground hover:border-primary/50"}`,onClick:()=>J(a),children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium truncate group-hover:text-accent-foreground",children:a.resourceName}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground group-hover:text-accent-foreground/80",children:[a.type," â€¢ ",$(a.resourceId).length," ","reservations"]})]}),(0,b.jsxs)("div",{className:"flex gap-1 ml-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 group-hover:text-accent-foreground group-hover:hover:bg-white/20",onClick:b=>{b.stopPropagation(),P(a),L(!0)},children:(0,b.jsx)(l.Edit,{className:"h-3 w-3"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 group-hover:text-accent-foreground group-hover:hover:bg-white/20",onClick:b=>{b.stopPropagation(),Z(a.resourceId)},children:(0,b.jsx)(m.Trash2,{className:"h-3 w-3 text-destructive group-hover:text-destructive-foreground"})})]})]},a.resourceId))})]})}),(0,b.jsx)("div",{className:"lg:col-span-2 space-y-6",children:I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Building2,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(e.CardTitle,{children:"Resource Details"})]}),(0,b.jsxs)(g.Dialog,{open:M,onOpenChange:N,children:[(0,b.jsx)(g.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{size:"sm",children:[(0,b.jsx)(t.BookOpen,{className:"h-4 w-4 mr-2"}),"Book Resource"]})}),(0,b.jsxs)(g.DialogContent,{children:[(0,b.jsxs)(g.DialogHeader,{children:[(0,b.jsxs)(g.DialogTitle,{children:["Book ",I.resourceName]}),(0,b.jsx)(g.DialogDescription,{children:"Create a new reservation for this resource."})]}),(0,b.jsxs)("form",{onSubmit:X,className:"space-y-4 mt-4",children:[(0,b.jsx)("input",{type:"hidden",name:"resourceId",value:I.resourceId}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(i.Label,{htmlFor:"reservationName",children:"Reservation Name"}),(0,b.jsx)(h.Input,{id:"reservationName",name:"reservationName",placeholder:"e.g. Club Meeting",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(i.Label,{htmlFor:"activityId",children:"Activity"}),(0,b.jsxs)(j.Select,{name:"activityId",required:!0,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select activity"})}),(0,b.jsx)(j.SelectContent,{children:G.map(a=>(0,b.jsxs)(j.SelectItem,{value:a.activityId.toString(),children:[a.activityName," (",a.type,")"]},a.activityId))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(i.Label,{htmlFor:"startDate",children:"Start Date & Time"}),(0,b.jsx)(h.Input,{id:"startDate",name:"startDate",type:"datetime-local",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(i.Label,{htmlFor:"endDate",children:"End Date & Time"}),(0,b.jsx)(h.Input,{id:"endDate",name:"endDate",type:"datetime-local",required:!0})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",children:"Confirm Booking"})]})]})]})]})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Resource Name"}),(0,b.jsx)("p",{className:"font-medium",children:I.resourceName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type"}),(0,b.jsx)("p",{className:"font-medium",children:(0,b.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-primary/10 text-primary",children:I.type})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Reservations"}),(0,b.jsx)("p",{className:"font-medium",children:$(I.resourceId).length})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upcoming Reservations"}),(0,b.jsx)("p",{className:"font-medium",children:aa(I.resourceId).length})]})]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(e.CardTitle,{children:"Upcoming Reservations"})]}),(0,b.jsx)(e.CardDescription,{children:"Future reservations for this resource"})]}),(0,b.jsx)(e.CardContent,{children:aa(I.resourceId).length>0?(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{children:"Activity"}),(0,b.jsx)(f.TableHead,{children:"Start Date/Time"}),(0,b.jsx)(f.TableHead,{children:"End Date/Time"}),(0,b.jsx)(f.TableHead,{children:"Duration"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Action"})]})}),(0,b.jsx)(f.TableBody,{children:aa(I.resourceId).map(a=>{let c=new Date(a.startDate),e=new Date(a.endDate);return(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableCell,{className:"font-medium",children:a.activityName}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4 text-muted-foreground"}),ac(a.startDate)]})}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4 text-muted-foreground"}),ac(a.endDate)]})}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(p,{className:"h-4 w-4 text-muted-foreground"}),ab(c,e)]})}),(0,b.jsx)(f.TableCell,{className:"text-right",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>Y(a.reservationId),title:"Cancel Reservation",children:(0,b.jsx)(m.Trash2,{className:"h-4 w-4 text-destructive"})})})]},a.reservationId)})})]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No upcoming reservations for this resource"})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(e.CardTitle,{children:"Reservation History"})]}),(0,b.jsx)(e.CardDescription,{children:"Past reservations for this resource"})]}),(0,b.jsx)(e.CardContent,{children:_(I.resourceId).length>0?(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{children:"Activity"}),(0,b.jsx)(f.TableHead,{children:"Start Date/Time"}),(0,b.jsx)(f.TableHead,{children:"End Date/Time"}),(0,b.jsx)(f.TableHead,{children:"Duration"})]})}),(0,b.jsx)(f.TableBody,{children:_(I.resourceId).map(a=>{let c=new Date(a.startDate),d=new Date(a.endDate);return(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableCell,{className:"font-medium",children:a.activityName}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4 text-muted-foreground"}),ac(a.startDate)]})}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4 text-muted-foreground"}),ac(a.endDate)]})}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(p,{className:"h-4 w-4 text-muted-foreground"}),ab(c,d)]})})]},a.reservationId)})})]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No past reservations for this resource"})})]})]}):(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"flex items-center justify-center py-12",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Select a resource to view details"})})})})]})})]})}a.s(["default",()=>F],84961)}];

//# sourceMappingURL=CL0V_app_%28dashboard%29_resources_page_tsx_051e1916._.js.map