module.exports=[76755,a=>{"use strict";var b=a.i(7537),c=a.i(2009),d=a.i(78989),e=a.i(32051),f=a.i(53210),g=a.i(51799),h=a.i(50897),i=a.i(62532),j=a.i(32882),k=a.i(65539),l=a.i(28888),m=a.i(6765),n=a.i(78183),o=a.i(631),p=a.i(13913);let q=(0,a.i(36343).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var r=a.i(73381),s=a.i(22677),t=a.i(41028),u=a.i(19913),v=(0,u.createServerReference)("408d8a16dd65eab3a2c2cf1b16b17a43ecc72344cf",u.callServer,void 0,u.findSourceMapURL,"createStudent"),w=(0,u.createServerReference)("60e243126889f36f9a9b65c200d76716e49b00f85a",u.callServer,void 0,u.findSourceMapURL,"updateStudent"),x=(0,u.createServerReference)("40d1c9713cde1b9aa52074219535e617ab69d29443",u.callServer,void 0,u.findSourceMapURL,"deleteStudent"),y=(0,u.createServerReference)("006d9c3697adedd4c6ad617895be501712b2a672c2",u.callServer,void 0,u.findSourceMapURL,"getMajors"),z=(0,u.createServerReference)("40edd7616a956db407e5876c1e4e2561d131617518",u.callServer,void 0,u.findSourceMapURL,"getStudentEvents"),A=(0,u.createServerReference)("4038c1fcdff1fc82b5c9e9705f7933053c2019cc58",u.callServer,void 0,u.findSourceMapURL,"getStudentClubs"),B=(0,u.createServerReference)("40624e09ca7caf0e861c0b570569dc47cbaa64a66e",u.callServer,void 0,u.findSourceMapURL,"getStudentActivities"),C=(0,u.createServerReference)("0031492db042306ed80fdd8cc1ae52f1dd5ce12325",u.callServer,void 0,u.findSourceMapURL,"getTotalActivitiesCount");function D(){let a,[u,D]=(0,c.useState)([]),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)([]),[M,N]=(0,c.useState)(0),[O,P]=(0,c.useState)(!0),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(null),{toast:W}=(0,s.useToast)(),X=async()=>{P(!0);try{let[a,b,c]=await Promise.all([(0,t.getStudents)(),y(),C()]);D(a),F(b),N(c),a.length>0&&!Q&&R(a[0])}catch(a){W({title:"Error loading data",variant:"destructive"})}finally{P(!1)}};(0,c.useEffect)(()=>{X()},[]),(0,c.useEffect)(()=>{Q?(z(Q.studentId).then(H),A(Q.studentId).then(J),B(Q.studentId).then(L)):(H([]),J([]),L([]))},[Q]);let Y=async a=>{let b;a.preventDefault();let c=new FormData(a.currentTarget);(b=U?await w(U.studentId,c):await v(c)).success?(W({title:b.message}),await X(),T(!1),V(null)):W({title:"Error",description:b.message,variant:"destructive"})},Z=async a=>{let b=await x(a);b.success?(W({title:b.message}),D(u.filter(b=>b.studentId!==a)),Q?.studentId===a&&R(null)):W({title:"Error",description:b.message,variant:"destructive"})},$=(a={},u.forEach(b=>{let c=b.majorName||"Unknown";a[c]=(a[c]||0)+1}),a);return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("header",{className:"border-b border-border bg-card",children:(0,b.jsxs)("div",{className:"px-8 py-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Students Management"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Student directory and participation tracking"})]})}),(0,b.jsx)("main",{className:"px-8 py-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Users,{className:"h-4 w-4 text-primary"}),(0,b.jsx)(e.CardTitle,{className:"text-sm",children:"Total Students"})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-2xl font-bold",children:u.length})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Award,{className:"h-4 w-4 text-primary"}),(0,b.jsx)(e.CardTitle,{className:"text-sm",children:"Activities"})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-2xl font-bold",children:M})})]}),(0,b.jsxs)(e.Card,{className:"col-span-2",children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q,{className:"h-4 w-4 text-primary"}),(0,b.jsx)(e.CardTitle,{className:"text-sm",children:"Students per Major"})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-1",children:0===Object.entries($).length?(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"No data yet"}):Object.entries($).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:a}),(0,b.jsxs)("span",{className:"font-medium",children:[c," students"]})]},a))})})]})]}),(0,b.jsxs)(e.Card,{className:"h-full max-h-[600px] overflow-hidden flex flex-col",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{children:"All Students"}),(0,b.jsx)(e.CardDescription,{className:"text-xs",children:"Select to view participation"})]}),(0,b.jsxs)(f.Dialog,{open:S,onOpenChange:a=>{T(a),a||V(null)},children:[(0,b.jsx)(f.DialogTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{size:"sm",children:(0,b.jsx)(j.Plus,{className:"h-4 w-4"})})}),(0,b.jsxs)(f.DialogContent,{children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{children:U?"Edit Student":"Create New Student"}),(0,b.jsx)(f.DialogDescription,{children:U?"Update student information":"Add a new student to the system"})]}),(0,b.jsxs)("form",{onSubmit:Y,className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"lastName",children:"Last Name"}),(0,b.jsx)(g.Input,{id:"lastName",name:"lastName",defaultValue:U?.lastName,required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"firstName",children:"First Name"}),(0,b.jsx)(g.Input,{id:"firstName",name:"firstName",defaultValue:U?.firstName,required:!0})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"cne",children:"Student Code (CNE)"}),(0,b.jsx)(g.Input,{id:"cne",name:"cne",defaultValue:U?.cne,required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(g.Input,{id:"email",name:"email",type:"email",defaultValue:U?.email,required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"majorId",children:"Program (Major)"}),(0,b.jsxs)(i.Select,{name:"majorId",defaultValue:U?.majorId?.toString()||"",required:!0,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select program"})}),(0,b.jsx)(i.SelectContent,{children:E.map(a=>(0,b.jsx)(i.SelectItem,{value:a.majorId.toString(),children:a.majorName},a.majorId))})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",children:U?"Update":"Create"})]})]})]})]})]}),(0,b.jsx)(e.CardContent,{className:"space-y-2 overflow-y-auto",children:O?(0,b.jsx)("div",{className:"flex justify-center py-8",children:(0,b.jsx)(r.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===u.length?(0,b.jsx)("p",{className:"text-center text-sm text-muted-foreground py-8",children:"No students found."}):u.map(a=>(0,b.jsxs)("div",{className:`p-4 rounded-lg border cursor-pointer transition-all ${Q?.studentId===a.studentId?"bg-primary/10 border-primary":"group bg-card border-border hover:bg-accent hover:text-accent-foreground hover:border-primary/50"}`,onClick:()=>R(a),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:`${a.firstName} ${a.lastName}`}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground group-hover:text-accent-foreground/80",children:a.cne})]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 group-hover:text-accent-foreground group-hover:hover:bg-white/20",onClick:b=>{b.stopPropagation(),V(a),T(!0)},children:(0,b.jsx)(k.Edit,{className:"h-3.5 w-3.5"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 group-hover:text-accent-foreground group-hover:hover:bg-white/20",onClick:b=>{b.stopPropagation(),Z(a.studentId)},children:(0,b.jsx)(l.Trash2,{className:"h-3.5 w-3.5 text-destructive group-hover:text-destructive-foreground"})})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-primary/10 text-primary group-hover:bg-white/20 group-hover:text-white",children:a.majorName||"No Major"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground group-hover:text-accent-foreground/80",children:a.email})]})]},a.studentId))})]})]}),(0,b.jsx)("div",{className:"lg:col-span-2",children:Q?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{className:"text-2xl",children:`${Q.firstName} ${Q.lastName}`}),(0,b.jsx)(e.CardDescription,{className:"mt-2",children:Q.email})]}),(0,b.jsx)("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-sm font-medium bg-primary/10 text-primary",children:Q.majorName||"N/A"})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"text-center p-4 rounded-lg bg-primary/5",children:[(0,b.jsx)(o.Award,{className:"h-6 w-6 text-primary mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:Q.activityCount}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Activities"})]}),(0,b.jsxs)("div",{className:"text-center p-4 rounded-lg bg-primary/5",children:[(0,b.jsx)(n.Calendar,{className:"h-6 w-6 text-primary mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:Q.eventCount}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Events"})]}),(0,b.jsxs)("div",{className:"text-center p-4 rounded-lg bg-primary/5",children:[(0,b.jsx)(p.Building2,{className:"h-6 w-6 text-primary mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:Q.clubCount}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Clubs"})]})]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Award,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(e.CardTitle,{className:"text-lg",children:"Registered Activities"})]}),(0,b.jsx)(e.CardDescription,{children:"All activities this student has participated in"})]}),(0,b.jsx)(e.CardContent,{children:0===K.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No activities registered yet"}):(0,b.jsx)("div",{className:"space-y-4",children:K.map(a=>(0,b.jsx)("div",{className:"flex items-center justify-between border-b pb-4 last:border-0 last:pb-0",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.activityName}),(0,b.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-secondary text-secondary-foreground capitalize",children:a.type})]})},a.activityId))})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(e.CardTitle,{className:"text-lg",children:"Participated Events"})]}),(0,b.jsx)(e.CardDescription,{children:"Events this student has attended"})]}),(0,b.jsx)(e.CardContent,{children:0===G.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No events attended yet"}):(0,b.jsx)("div",{className:"space-y-4",children:G.map(a=>(0,b.jsx)("div",{className:"flex items-center justify-between border-b pb-4 last:border-0 last:pb-0",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.eventName}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[new Date(a.startDate).toLocaleDateString()," - ",new Date(a.endDate).toLocaleDateString()]})]})},a.eventId))})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Building2,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(e.CardTitle,{className:"text-lg",children:"Club Memberships"})]}),(0,b.jsx)(e.CardDescription,{children:"Clubs this student is a member of"})]}),(0,b.jsx)(e.CardContent,{children:0===I.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Not a member of any clubs yet"}):(0,b.jsx)("div",{className:"space-y-4",children:I.map(a=>(0,b.jsx)("div",{className:"flex items-center justify-between border-b pb-4 last:border-0 last:pb-0",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.clubName}),(0,b.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-secondary text-secondary-foreground",children:a.category})]})},a.clubId))})})]})]}):(0,b.jsx)(e.Card,{className:"h-full flex items-center justify-center",children:(0,b.jsxs)(e.CardContent,{className:"text-center py-12",children:[(0,b.jsx)(m.Users,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Select a student to view their participation details"})]})})})]})})]})}a.s(["default",()=>D],76755)}];

//# sourceMappingURL=CL0V_app_%28dashboard%29_students_page_tsx_2a23fa70._.js.map