module.exports=[47111,a=>{"use strict";var b=a.i(50479),c=a.i(32821),d=a.i(96547),e=a.i(28310);a.i(20420);var f=a.i(4745),g=a.i(66759);let h=c.z.object({firstName:c.z.string().min(2,"First name must be at least 2 characters"),lastName:c.z.string().min(2,"Last name must be at least 2 characters"),email:c.z.string().email("Invalid email address"),password:c.z.string().min(6,"Password must be at least 6 characters")});async function i(a,b){let c=h.safeParse({firstName:b.get("firstName"),lastName:b.get("lastName"),email:b.get("email"),password:b.get("password")});if(!c.success)return{errors:c.error.flatten().fieldErrors,message:"Missing Fields. Failed to Register."};let{firstName:g,lastName:i,email:j,password:k}=c.data,l=await e.default.hash(k,10);try{if(d.default.prepare("SELECT 1 FROM admins WHERE email = ?").get(j))return{message:"Email already in use.",errors:{email:["Email already in use."]}};d.default.prepare(`
      INSERT INTO admins (firstName, lastName, email, password, status)
      VALUES (?, ?, ?, ?, 'pending')
    `).run(g,i,j,l)}catch(a){return console.error("Registration failed:",a),{message:"Database Error: Failed to Create Admin."}}(0,f.redirect)("/login")}(0,g.ensureServerEntryExports)([i]),(0,b.registerServerReference)(i,"60c6648eeb204b901028044154455b8a19fda5b01a",null),a.s([],42626),a.i(42626),a.s(["60c6648eeb204b901028044154455b8a19fda5b01a",()=>i],47111)}];

//# sourceMappingURL=CL0V__next-internal_server_app_register_page_actions_d4db66d1.js.map