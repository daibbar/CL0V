(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8955,e=>{"use strict";let t=(0,e.i(21767).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],8955)},30158,e=>{"use strict";var t=e.i(82807),s=(0,t.createServerReference)("00d9aceb431ba52b8dbfaaa55a20c815bf08a93a45",t.callServer,void 0,t.findSourceMapURL,"getStudents");e.s(["getStudents",()=>s])},85951,e=>{"use strict";let t=(0,e.i(21767).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);e.s(["Building2",()=>t],85951)},77088,e=>{"use strict";let t=(0,e.i(21767).default)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);e.s(["Award",()=>t],77088)},80198,e=>{"use strict";var t=e.i(41308),s=e.i(94973),a=e.i(30060),r=e.i(23153),d=e.i(9415),i=e.i(31361),l=e.i(76782),c=e.i(5433),n=e.i(95904),o=e.i(43323),x=e.i(52137),m=e.i(28638),u=e.i(72729),h=e.i(77088),p=e.i(85951);let j=(0,e.i(21767).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var f=e.i(8955),g=e.i(56326),N=e.i(30158),v=e.i(82807),b=(0,v.createServerReference)("408d8a16dd65eab3a2c2cf1b16b17a43ecc72344cf",v.callServer,void 0,v.findSourceMapURL,"createStudent"),y=(0,v.createServerReference)("60e243126889f36f9a9b65c200d76716e49b00f85a",v.callServer,void 0,v.findSourceMapURL,"updateStudent"),C=(0,v.createServerReference)("40d1c9713cde1b9aa52074219535e617ab69d29443",v.callServer,void 0,v.findSourceMapURL,"deleteStudent"),S=(0,v.createServerReference)("006d9c3697adedd4c6ad617895be501712b2a672c2",v.callServer,void 0,v.findSourceMapURL,"getMajors"),w=(0,v.createServerReference)("40edd7616a956db407e5876c1e4e2561d131617518",v.callServer,void 0,v.findSourceMapURL,"getStudentEvents"),I=(0,v.createServerReference)("4038c1fcdff1fc82b5c9e9705f7933053c2019cc58",v.callServer,void 0,v.findSourceMapURL,"getStudentClubs"),M=(0,v.createServerReference)("40624e09ca7caf0e861c0b570569dc47cbaa64a66e",v.callServer,void 0,v.findSourceMapURL,"getStudentActivities"),k=(0,v.createServerReference)("0031492db042306ed80fdd8cc1ae52f1dd5ce12325",v.callServer,void 0,v.findSourceMapURL,"getTotalActivitiesCount");function R(){let e,[v,R]=(0,s.useState)([]),[T,D]=(0,s.useState)([]),[L,U]=(0,s.useState)([]),[A,E]=(0,s.useState)([]),[B,H]=(0,s.useState)([]),[P,q]=(0,s.useState)(0),[F,V]=(0,s.useState)(!0),[z,O]=(0,s.useState)(null),[$,K]=(0,s.useState)(!1),[Z,G]=(0,s.useState)(null),{toast:J}=(0,g.useToast)(),Q=async()=>{V(!0);try{let[e,t,s]=await Promise.all([(0,N.getStudents)(),S(),k()]);R(e),D(t),q(s),e.length>0&&!z&&O(e[0])}catch(e){J({title:"Error loading data",variant:"destructive"})}finally{V(!1)}};(0,s.useEffect)(()=>{Q()},[]),(0,s.useEffect)(()=>{z?(w(z.studentId).then(U),I(z.studentId).then(E),M(z.studentId).then(H)):(U([]),E([]),H([]))},[z]);let W=async e=>{let t;e.preventDefault();let s=new FormData(e.currentTarget);(t=Z?await y(Z.studentId,s):await b(s)).success?(J({title:t.message}),await Q(),K(!1),G(null)):J({title:"Error",description:t.message,variant:"destructive"})},X=async e=>{let t=await C(e);t.success?(J({title:t.message}),R(v.filter(t=>t.studentId!==e)),z?.studentId===e&&O(null)):J({title:"Error",description:t.message,variant:"destructive"})},Y=(e={},v.forEach(t=>{let s=t.majorName||"Unknown";e[s]=(e[s]||0)+1}),e);return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsxs)("div",{className:"px-8 py-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Students Management"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Student directory and participation tracking"})]})}),(0,t.jsx)("main",{className:"px-8 py-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Users,{className:"h-4 w-4 text-primary"}),(0,t.jsx)(r.CardTitle,{className:"text-sm",children:"Total Students"})]})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsx)("p",{className:"text-2xl font-bold",children:v.length})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Award,{className:"h-4 w-4 text-primary"}),(0,t.jsx)(r.CardTitle,{className:"text-sm",children:"Activities"})]})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsx)("p",{className:"text-2xl font-bold",children:P})})]}),(0,t.jsxs)(r.Card,{className:"col-span-2",children:[(0,t.jsx)(r.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j,{className:"h-4 w-4 text-primary"}),(0,t.jsx)(r.CardTitle,{className:"text-sm",children:"Students per Major"})]})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsx)("div",{className:"space-y-1",children:0===Object.entries(Y).length?(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"No data yet"}):Object.entries(Y).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:e}),(0,t.jsxs)("span",{className:"font-medium",children:[s," students"]})]},e))})})]})]}),(0,t.jsxs)(r.Card,{className:"h-full max-h-[600px] overflow-hidden flex flex-col",children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.CardTitle,{children:"All Students"}),(0,t.jsx)(r.CardDescription,{className:"text-xs",children:"Select to view participation"})]}),(0,t.jsxs)(d.Dialog,{open:$,onOpenChange:e=>{K(e),e||G(null)},children:[(0,t.jsx)(d.DialogTrigger,{asChild:!0,children:(0,t.jsx)(a.Button,{size:"sm",children:(0,t.jsx)(n.Plus,{className:"h-4 w-4"})})}),(0,t.jsxs)(d.DialogContent,{children:[(0,t.jsxs)(d.DialogHeader,{children:[(0,t.jsx)(d.DialogTitle,{children:Z?"Edit Student":"Create New Student"}),(0,t.jsx)(d.DialogDescription,{children:Z?"Update student information":"Add a new student to the system"})]}),(0,t.jsxs)("form",{onSubmit:W,className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"lastName",children:"Last Name"}),(0,t.jsx)(i.Input,{id:"lastName",name:"lastName",defaultValue:Z?.lastName,required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"firstName",children:"First Name"}),(0,t.jsx)(i.Input,{id:"firstName",name:"firstName",defaultValue:Z?.firstName,required:!0})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"cne",children:"Student Code (CNE)"}),(0,t.jsx)(i.Input,{id:"cne",name:"cne",defaultValue:Z?.cne,required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"email",children:"Email"}),(0,t.jsx)(i.Input,{id:"email",name:"email",type:"email",defaultValue:Z?.email,required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"majorId",children:"Program (Major)"}),(0,t.jsxs)(c.Select,{name:"majorId",defaultValue:Z?.majorId?.toString()||"",required:!0,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Select program"})}),(0,t.jsx)(c.SelectContent,{children:T.map(e=>(0,t.jsx)(c.SelectItem,{value:e.majorId.toString(),children:e.majorName},e.majorId))})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>K(!1),children:"Cancel"}),(0,t.jsx)(a.Button,{type:"submit",children:Z?"Update":"Create"})]})]})]})]})]}),(0,t.jsx)(r.CardContent,{className:"space-y-2 overflow-y-auto",children:F?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(f.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===v.length?(0,t.jsx)("p",{className:"text-center text-sm text-muted-foreground py-8",children:"No students found."}):v.map(e=>(0,t.jsxs)("div",{className:`p-4 rounded-lg border cursor-pointer transition-all ${z?.studentId===e.studentId?"bg-primary/10 border-primary":"group bg-card border-border hover:bg-accent hover:text-accent-foreground hover:border-primary/50"}`,onClick:()=>O(e),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:`${e.firstName} ${e.lastName}`}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground group-hover:text-accent-foreground/80",children:e.cne})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 group-hover:text-accent-foreground group-hover:hover:bg-white/20",onClick:t=>{t.stopPropagation(),G(e),K(!0)},children:(0,t.jsx)(o.Edit,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 group-hover:text-accent-foreground group-hover:hover:bg-white/20",onClick:t=>{t.stopPropagation(),X(e.studentId)},children:(0,t.jsx)(x.Trash2,{className:"h-3.5 w-3.5 text-destructive group-hover:text-destructive-foreground"})})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-primary/10 text-primary group-hover:bg-white/20 group-hover:text-white",children:e.majorName||"No Major"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground group-hover:text-accent-foreground/80",children:e.email})]})]},e.studentId))})]})]}),(0,t.jsx)("div",{className:"lg:col-span-2",children:z?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.CardTitle,{className:"text-2xl",children:`${z.firstName} ${z.lastName}`}),(0,t.jsx)(r.CardDescription,{className:"mt-2",children:z.email})]}),(0,t.jsx)("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-sm font-medium bg-primary/10 text-primary",children:z.majorName||"N/A"})]})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"text-center p-4 rounded-lg bg-primary/5",children:[(0,t.jsx)(h.Award,{className:"h-6 w-6 text-primary mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:z.activityCount}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Activities"})]}),(0,t.jsxs)("div",{className:"text-center p-4 rounded-lg bg-primary/5",children:[(0,t.jsx)(u.Calendar,{className:"h-6 w-6 text-primary mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:z.eventCount}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Events"})]}),(0,t.jsxs)("div",{className:"text-center p-4 rounded-lg bg-primary/5",children:[(0,t.jsx)(p.Building2,{className:"h-6 w-6 text-primary mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:z.clubCount}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Clubs"})]})]})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Award,{className:"h-5 w-5 text-primary"}),(0,t.jsx)(r.CardTitle,{className:"text-lg",children:"Registered Activities"})]}),(0,t.jsx)(r.CardDescription,{children:"All activities this student has participated in"})]}),(0,t.jsx)(r.CardContent,{children:0===B.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No activities registered yet"}):(0,t.jsx)("div",{className:"space-y-4",children:B.map(e=>(0,t.jsx)("div",{className:"flex items-center justify-between border-b pb-4 last:border-0 last:pb-0",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.activityName}),(0,t.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-secondary text-secondary-foreground capitalize",children:e.type})]})},e.activityId))})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Calendar,{className:"h-5 w-5 text-primary"}),(0,t.jsx)(r.CardTitle,{className:"text-lg",children:"Participated Events"})]}),(0,t.jsx)(r.CardDescription,{children:"Events this student has attended"})]}),(0,t.jsx)(r.CardContent,{children:0===L.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No events attended yet"}):(0,t.jsx)("div",{className:"space-y-4",children:L.map(e=>(0,t.jsx)("div",{className:"flex items-center justify-between border-b pb-4 last:border-0 last:pb-0",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.eventName}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]})]})},e.eventId))})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Building2,{className:"h-5 w-5 text-primary"}),(0,t.jsx)(r.CardTitle,{className:"text-lg",children:"Club Memberships"})]}),(0,t.jsx)(r.CardDescription,{children:"Clubs this student is a member of"})]}),(0,t.jsx)(r.CardContent,{children:0===A.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Not a member of any clubs yet"}):(0,t.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,t.jsx)("div",{className:"flex items-center justify-between border-b pb-4 last:border-0 last:pb-0",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.clubName}),(0,t.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-secondary text-secondary-foreground",children:e.category})]})},e.clubId))})})]})]}):(0,t.jsx)(r.Card,{className:"h-full flex items-center justify-center",children:(0,t.jsxs)(r.CardContent,{className:"text-center py-12",children:[(0,t.jsx)(m.Users,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Select a student to view their participation details"})]})})})]})})]})}e.s(["default",()=>R],80198)}]);